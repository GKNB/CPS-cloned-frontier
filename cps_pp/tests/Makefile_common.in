#
#   This is the makefile for all the commands
#   that are common for all testing applications.
#
#
#


# This should point at the top level directory for the 
# cps code.
TOP=../../..

SRCDIR = @abs_top_srcdir@
BUILDDIR = @abs_top_builddir@
QOS = @QOS@
COMPILER = @CXX@
LDFLAGS = @LDFLAGS@

BIN = regression_cps



#
# include list for the Columbia code
#
INCLIST = @INCLUDE_FLAGS@

CXXFLAGS= @CXXFLAGS@
DFLAGS= @DFLAGS@

CFLAGS = ${CXXFLAGS} ${DFLAGS}

#
# Libraries for the Columbia code
#
# (These are for the scalar version of the code)
#
#

.PHONY: cps clean


LIBLIST =\
  $(BUILDDIR)/cps.a \

#
#  targets
#

me = $(notdir $(PWD))

all:$(BIN).x

$(BIN).x:  main.o
	$(COMPILER) -o $(BIN).x main.o $(LIBLIST) $(LDFLAGS)

main.o: main.C
	$(COMPILER) -o main.o $(CFLAGS) -c $(INCLIST) main.C

cps:
	$(MAKE) -C $(BUILDDIR)

clean:
	rm -f *.dat *.o  $(BIN).x
	rm -f ../regressions/*$(me).dat
	rm -f ../regressions/*$(me).checklog

