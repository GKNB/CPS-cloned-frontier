#
#   This is the makefile for all the commands
#   that are common for all testing applications.
#
#
#


# This should point at the top level directory for the 
# cps code.
TOP=../../..

SRCDIR = @abs_top_srcdir@
BUILDDIR = @abs_top_builddir@
COMPILER = @CXX@
LDFLAGS = @LDFLAGS@



#
# include list for the Columbia code
#
#TOPINC=@enable_installdir@
INCLIST = @INCLUDE_FLAGS@

CXXFLAGS= @CXXFLAGS@
DFLAGS= @DFLAGS@

CFLAGS = ${CXXFLAGS} ${DFLAGS}

#
# Libraries for the Columbia code
#
# (These are for the scalar version of the code)
#
#

.PHONY: cps clean


LINLIB = @enable_installdir@
LIBLIST =\
  $(LINLIB)/cps.a \

#
#  targets
#

me = $(notdir $(PWD))

all:regression_cps.x

regression_cps.x:  main.o
	$(COMPILER) -o regression_cps.x main.o $(LIBLIST) $(LDFLAGS)

main.o: main.C
	$(COMPILER) -o main.o $(CFLAGS) -c $(INCLIST) main.C

cps:
#       cd $(TOPINC); $(MAKE)
	$(MAKE) -C $(SRCDIR)

clean:
	rm -f *.dat *.o  regression_cps.x
	rm -f ../regressions/*$(me).dat
	rm -f ../regressions/*$(me).checklog

